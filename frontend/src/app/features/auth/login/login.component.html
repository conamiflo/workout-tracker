<div class="login-container">
  <div class="login-card">
    <!-- Logo Section -->
    <div class="logo-section">
      <div class="logo">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
          <rect x="4" y="11" width="4" height="8" rx="2" fill="currentColor"/>
          <rect x="16" y="11" width="4" height="8" rx="2" fill="currentColor"/>
          <rect x="6" y="7" width="12" height="4" rx="2" fill="currentColor"/>
        </svg>
      </div>
      <h1 class="app-title">WorkoutTracker</h1>
      <p class="app-subtitle">Sign in to your account</p>
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">

      <!-- Global Error Message -->
      <div *ngIf="globalError" class="global-error">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
          <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
        </svg>
        {{ globalError }}
      </div>

      <!-- Username Field -->
      <div class="form-group">
        <label for="username" class="form-label">Username</label>
        <div class="input-wrapper">
          <input
            id="username"
            type="text"
            formControlName="username"
            class="form-input"
            [ngClass]="{
              'error': username?.invalid && username?.touched,
              'valid': username?.valid && username?.touched
            }"
            placeholder="Enter your username"
          >
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div *ngIf="getFieldError('username')" class="field-error">
          {{ getFieldError('username') }}
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <label for="password" class="form-label">Password</label>
        <div class="input-wrapper">
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            class="form-input"
            [ngClass]="{
              'error': password?.invalid && password?.touched,
              'valid': password?.valid && password?.touched
            }"
            placeholder="Enter your password"
          >
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2"/>
            <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2"/>
          </svg>
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
          >
            <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            </svg>
            <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 4.028 7.66607 6.17 6.17M9.9 4.24C10.5883 4.0789 11.2931 3.99836 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1749 15.0074 10.8016 14.8565C10.4283 14.7056 10.0887 14.481 9.80385 14.1962C9.51900 13.9113 9.29440 13.5717 9.14351 13.1984C8.99262 12.8251 8.9185 12.4247 8.92597 12.0219C8.93309 11.6191 9.02135 11.2218 9.18529 10.8538C9.34922 10.4858 9.58563 10.1546 9.88 9.88" stroke="currentColor" stroke-width="2"/>
              <path d="M1 1L23 23" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
        </div>
        <div *ngIf="getFieldError('password')" class="field-error">
          {{ getFieldError('password') }}
        </div>
      </div>

      <!-- Login Button -->
      <button
        type="submit"
        class="login-btn"
        [disabled]="isLoading"
        [ngClass]="{ 'loading': isLoading }"
      >
        <span *ngIf="!isLoading">Sign In</span>
        <div *ngIf="isLoading" class="spinner"></div>
      </button>

      <!-- Register Link -->
      <div class="register-link">
        <p>Don't have an account?
          <button type="button" class="link-btn" (click)="navigateToRegister()">
            Sign up here
          </button>
        </p>
      </div>
    </form>
  </div>
</div>
